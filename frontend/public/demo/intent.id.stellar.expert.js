!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.intentIdStellarExpert=t():e.intentIdStellarExpert=t()}(window,function(){return function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";if("object"==typeof window&&"function"!=typeof window.fetch)throw new Error("Browser FetchAPI is not available. For legacy browsers support use polyfills such as whatwg-fetch.");const n=r(2);e.exports=n},function(e,t,r){"use strict";const n=r(3),i=r(4),o=r(5),s=["network","horizon","prepare","pubkey","demo_mode"];class Intent{constructor({app_name:e,app_description:t}){if(!e)return console.warn('Parameter "app_name" is required.');this.app_name=e,this.app_description=t}request(e,t){if("object"!=typeof e)return Promise.reject(new Error("Intent parameters expected."));const r=e.intent,n=e.pubkey,a={intent:r};if(!r)return Promise.reject(new Error('Parameter "intent" is required.'));if(n&&!/^G[0-9A-Z]{55}$/.test(n))return Promise.reject(new Error('Invalid "pubkey" parameter. Stellar account public key expected.'));const u=o[r];if(!u)return Promise.reject(new Error(`Unknown intent: "${r}".`));for(let t of u.params.required){const n=e[t];if(!n)return Promise.reject(new Error(`Parameter "${t}" is required for intent "${r}".`));a[t]=n}if(u.params.optional)for(let t of u.params.optional){const r=e[t];r&&(a[t]=r)}if(t)for(let e of s){const r=t[e];r&&(a[e]=r)}return Object.assign(a,{app_name:this.app_name||"Unknown Application",app_description:this.app_description||"No description"}),i.showIntent(a).then(e=>{const t={};for(let r of u.params.return)t[r]=e[r];return t})}requestPublicKey(){return this.request({intent:"public_key"})}requestBasicInfo(){return this.request({intent:"basic_info"})}authenticate(e,t){return this.request({intent:"authenticate",token:e+n()},t)}signTransaction(e,t){return this.request({intent:"tx",xdr:e},t)}signMessage(e,t){return this.request({intent:"sign_msg",message:normalizeMessageToSign(e)},t)}verifyMessage(e,t,r){return this.request({intent:"verify_msg",message:normalizeMessageToSign(e),message_signature:t},r)}pay(e,t,r,n,i,o,s){return this.request({intent:"pay",destination:e,amount:t,asset_code:r,asset_issuer:n,memo:i,memo_type:o},s)}trust(e,t,r,n){return this.request({intent:"establish_trustline",asset_code:e,asset_issuer:t,limit:r},n)}inflationVote(e,t){return this.request({intent:"inflation_vote",destination:e},t)}generateAuthenticationToken(){return n()}}function normalizeMessageToSign(e){switch(typeof e){case"number":case"boolean":return e.toString();case"string":return e;case"undefined":return""}return JSON.stringify(e)}Intent.intentInterface=o,e.exports=Intent},function(e,t,r){"use strict";e.exports=function generateRandomToken(){const e=[];for(let t=0;t<4;t++)e.push(Math.random().toString(36).slice(2));return e.join("")}},function(e,t,r){"use strict";e.exports=new class IntentDispatcher{constructor(){this.intentWindow=null,this.pendingRequest=null,window.addEventListener("message",this.messageHandler.bind(this))}serializeIntentParams(e){return Object.entries(e).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&")}showIntent(e){let t=`${"string"==typeof stellarExpertIdFrontend?stellarExpertIdFrontend:"https://id.stellar.expert"}/confirm?${this.serializeIntentParams(e)}`,r=void 0!==window.screenLeft?window.screenLeft:window.screenX,n=void 0!==window.screenTop?window.screenTop:window.screenY,i=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-220+r,o=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-300+n;return this.intentWindow=window.open(t,"auth.id.stellar.expert",`height=600,width=440,top=${o},left=${i},menubar=0,toolbar=0,location=0,status=0,personalbar=0,scrollbars=0,dependent=1`),new Promise((e,t)=>this.pendingRequest=((r,n)=>r?t(r):e(n)))}messageHandler({data:e}){this.pendingRequest&&(e.error?this.pendingRequest(e.error):this.pendingRequest(null,e),this.intentWindow.close())}}},function(e,t,r){"use strict";e.exports={public_key:{risk:"low",personalData:!1,unsafe:!1,params:{required:[],return:["pubkey"]}},basic_info:{risk:"low",personalData:!0,unsafe:!1,params:{required:[],return:["info"]}},authenticate:{risk:"low",personalData:!1,unsafe:!1,params:{required:["token"],return:["pubkey","token","token_signature"]}},sign_msg:{risk:"medium",personalData:!1,unsafe:!1,params:{required:["message"],optional:["pubkey"],return:["pubkey","message","message_signature"]}},verify_msg:{risk:"low",personalData:!1,unsafe:!1,params:{required:["message","message_signature"],optional:["pubkey"],return:["pubkey","message","message_signature","confirmed"]}},tx:{risk:"high",personalData:!1,unsafe:!0,params:{required:["xdr"],optional:["pubkey","network","horizon"],return:["xdr","signed_envelope_xdr","pubkey","tx_signature","network","prepare"]}},pay:{risk:"medium",personalData:!1,unsafe:!1,params:{required:["amount","destination"],optional:["asset_code","asset_issuer","memo","memo_type","network","horizon","prepare"],return:["amount","destination","asset_code","asset_issuer","memo","memo_type","pubkey","network","horizon"]}},trust:{risk:"low",personalData:!1,unsafe:!1,params:{required:["asset_code","asset_issuer"],optional:["limit","pubkey","network","horizon","prepare"],return:["asset_code","asset_issuer","limit","pubkey","network","horizon"]}},inflation_vote:{risk:"medium",personalData:!1,unsafe:!1,params:{required:["destination"],optional:["pubkey","network","horizon","prepare"],return:["destination","pubkey","network","horizon"]}}}}])});